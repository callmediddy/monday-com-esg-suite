[{"/Users/akhand/Developer/monday/ratings/quickstart-react/src/index.js":"1","/Users/akhand/Developer/monday/ratings/quickstart-react/src/App.js":"2","/Users/akhand/Developer/monday/ratings/quickstart-react/src/serviceWorker.js":"3"},{"size":484,"mtime":1662540933893,"results":"4","hashOfConfig":"5"},{"size":2825,"mtime":1662543391345,"results":"6","hashOfConfig":"5"},{"size":5085,"mtime":1662540933894,"results":"7","hashOfConfig":"5"},{"filePath":"8","messages":"9","suppressedMessages":"10","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"1n4v70l",{"filePath":"11","messages":"12","suppressedMessages":"13","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"14"},{"filePath":"15","messages":"16","suppressedMessages":"17","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/akhand/Developer/monday/ratings/quickstart-react/src/index.js",[],[],"/Users/akhand/Developer/monday/ratings/quickstart-react/src/App.js",["18","19","20"],[],"import React, { useState, useEffect } from \"react\";\nimport \"./App.css\";\nimport mondaySdk from \"monday-sdk-js\";\nimport \"monday-ui-react-core/dist/main.css\"\nimport Favorite from \"monday-ui-react-core/dist/icons/Favorite\"\n\nconst monday = mondaySdk();\n\nconst OLD_TOKEN = 'eyJhbGciOiJIUzI1NiJ9.eyJ0aWQiOjE3NjYwMTI4NCwidWlkIjozMzQ2MDkzNCwiaWFkIjoiMjAyMi0wOC0yMVQwMDoxMDo0Ni4wMDBaIiwicGVyIjoibWU6d3JpdGUiLCJhY3RpZCI6MTMxNTgyMzEsInJnbiI6InVzZTEifQ.LUmDgx0ng9YKgiqKtv0Em6p1mZ0mZNMFAOpOnvjwecQ'\nconst NEW_TOKEN = 'eyJhbGciOiJIUzI1NiJ9.eyJ0aWQiOjE3OTU2MzY2MCwidWlkIjozNDA3NjA0MCwiaWFkIjoiMjAyMi0wOS0wN1QwODoyMjoyMS4wMDBaIiwicGVyIjoibWU6d3JpdGUiLCJhY3RpZCI6MTMzNDMxMjQsInJnbiI6InVzZTEifQ.OSWJsGaVs4Wf1C9YLAIvscYhBAL33Kf3R1w3CuUDJ-I'\n\nconst App = () => {\n\n\n  const [mainBoardID, setMainBoardID] = useState(null)\n  const [mainBoardItems, setMainBoardItems] = useState([])\n  const [score, setScore] = useState(5)\n  const [antiScore, setAntiScore] = useState(0)\n\n  function fetchMainBoard() {\n    if (mainBoardID) {\n      let query = `query {boards (ids:${mainBoardID}){items { column_values (ids:[\"rating\"]) {\n        id text \n      }}}} `;\n\n      fetch(\"https://api.monday.com/v2\", {\n        method: 'post',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': NEW_TOKEN\n        },\n        body: JSON.stringify({\n          'query': query\n        })\n      })\n        .then(res => res.json())\n        .then(res => {\n          setMainBoardItems(res.data.boards[0].items)\n        });\n    }\n  }\n\n  function fetchContextBoard() {\n    monday.listen(\"context\", res => {\n      console.log(\"Inside the use effect Context object changed: \", res.data.boardIds[0]);\n      if (res.data.boardIds[0] !== undefined) {\n        setMainBoardID(res.data.boardIds[0])\n        console.log(\"Board ID fetched\")\n      }\n    })\n  }\n\n  function calculateRating() {\n    let totalScore = 0\n    if (mainBoardItems.length > 0) {\n      console.log(\"Main board items are\")\n      mainBoardItems.forEach(element => {\n        totalScore += parseFloat(element.column_values[0].text)\n      });\n      let averageScore = totalScore / mainBoardItems.length\n      let roundedScore = Math.round(averageScore)\n      setScore(roundedScore)\n      setAntiScore(5 - roundedScore)\n    }\n    console.log(score)\n    console.log(antiScore)\n  }\n\n  useEffect(() => {\n    fetchContextBoard()\n  }, [])\n\n\n  useEffect(() => {\n    fetchMainBoard()\n  }, [mainBoardID])\n\n  useEffect(() => {\n    calculateRating()\n  }, [mainBoardItems])\n\n\n  return (\n    <div className=\"App\">\n      {[...Array(score)].map((e, i) => <div style={{ color: \"var(--color-egg_yolk)\" }}><Favorite size=\"huge\" /></div>)}\n      {[...Array(antiScore)].map((e, i) => <div style={{ color: \"var(--color-american_gray)\" }}><Favorite size=\"huge\" /></div>)}\n    </div>\n  )\n}\n\nexport default App;\n","/Users/akhand/Developer/monday/ratings/quickstart-react/src/serviceWorker.js",[],[],{"ruleId":"21","severity":1,"message":"22","line":9,"column":7,"nodeType":"23","messageId":"24","endLine":9,"endColumn":16},{"ruleId":"25","severity":1,"message":"26","line":76,"column":6,"nodeType":"27","endLine":76,"endColumn":19,"suggestions":"28"},{"ruleId":"25","severity":1,"message":"29","line":80,"column":6,"nodeType":"27","endLine":80,"endColumn":22,"suggestions":"30"},"no-unused-vars","'OLD_TOKEN' is assigned a value but never used.","Identifier","unusedVar","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'fetchMainBoard'. Either include it or remove the dependency array.","ArrayExpression",["31"],"React Hook useEffect has a missing dependency: 'calculateRating'. Either include it or remove the dependency array.",["32"],{"desc":"33","fix":"34"},{"desc":"35","fix":"36"},"Update the dependencies array to be: [fetchMainBoard, mainBoardID]",{"range":"37","text":"38"},"Update the dependencies array to be: [calculateRating, mainBoardItems]",{"range":"39","text":"40"},[2418,2431],"[fetchMainBoard, mainBoardID]",[2481,2497],"[calculateRating, mainBoardItems]"]