{"ast":null,"code":"import _slicedToArray from\"/Users/akhand/Developer/monday/esg/quickstart-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import\"./App.css\";import mondaySdk from\"monday-sdk-js\";import\"monday-ui-react-core/dist/main.css\";//Explore more Monday React Components here: https://style.monday.com/\nimport{jsx as _jsx}from\"react/jsx-runtime\";var monday=mondaySdk();var App=function App(){var _useState=useState(10),_useState2=_slicedToArray(_useState,2),score=_useState2[0],setScore=_useState2[1];var _useState3=useState(\"AAA\"),_useState4=_slicedToArray(_useState3,2),rating=_useState4[0],setRating=_useState4[1];var _useState5=useState(\"black\"),_useState6=_slicedToArray(_useState5,2),color=_useState6[0],setColor=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),mainBoardID=_useState8[0],setMainBoardID=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),mainBoardItems=_useState10[0],setMainBoardItems=_useState10[1];monday.listen(\"context\",function(res){console.log(\"Context object changed: \",res.data);// do Something\n});monday.listen(\"settings\",function(res){console.log(\"Settings object changed: \",res.data);// do Something\n});function fetchBoards(){var query='query { boards{ name id }}';fetch(\"https://api.monday.com/v2\",{method:'post',headers:{'Content-Type':'application/json','Authorization':'eyJhbGciOiJIUzI1NiJ9.eyJ0aWQiOjE3NjYwMTI4NCwidWlkIjozMzQ2MDkzNCwiaWFkIjoiMjAyMi0wOC0yMVQwMDoxMDo0Ni4wMDBaIiwicGVyIjoibWU6d3JpdGUiLCJhY3RpZCI6MTMxNTgyMzEsInJnbiI6InVzZTEifQ.LUmDgx0ng9YKgiqKtv0Em6p1mZ0mZNMFAOpOnvjwecQ'},body:JSON.stringify({'query':query})}).then(function(res){return res.json();}).then(function(res){var mainBoard=res.data.boards.filter(function(el){return el.name===\"[ESG] Annual Goal Tracker & Overview\";});setMainBoardID(mainBoard[0].id);});}function fetchMainBoard(){if(mainBoardID){var query=\"query {boards (ids:\".concat(mainBoardID,\"){items { column_values (ids:[\\\"numbers\\\", \\\"status\\\", \\\"text2\\\", \\\"text4\\\"]) {\\n        id text \\n      }}}} \");fetch(\"https://api.monday.com/v2\",{method:'post',headers:{'Content-Type':'application/json','Authorization':'eyJhbGciOiJIUzI1NiJ9.eyJ0aWQiOjE3NjYwMTI4NCwidWlkIjozMzQ2MDkzNCwiaWFkIjoiMjAyMi0wOC0yMVQwMDoxMDo0Ni4wMDBaIiwicGVyIjoibWU6d3JpdGUiLCJhY3RpZCI6MTMxNTgyMzEsInJnbiI6InVzZTEifQ.LUmDgx0ng9YKgiqKtv0Em6p1mZ0mZNMFAOpOnvjwecQ'},body:JSON.stringify({'query':query})}).then(function(res){return res.json();}).then(function(res){setMainBoardItems(res.data.boards[0].items);});}}function fetchContextBoard(){monday.listen(\"context\",function(res){console.log(\"Inside the use effect Context object changed: \",res.data.boardIds[0]);setMainBoardID(res.data.boardsIds[0]);});}function calculateScore(){if(mainBoardItems){var tempScore=1;mainBoardItems.forEach(function(element){var col=element.column_values;var goal=col[0].text;var status=col[1].text;var goal_track=col[2].text;var weight=col[3].text;if(status===\"Working on it\"){var ratio=(goal_track-goal)/goal*weight;tempScore+=ratio;}if(status===\"Overused\"){var _ratio=(goal-goal_track)/goal*weight;tempScore+=_ratio;}if(status===\"Underused\"){var _ratio2=(goal-goal_track)/goal*weight;tempScore+=_ratio2;}if(status===\"Done\"){var _ratio3=(goal_track-goal)/goal*weight;tempScore+=_ratio3;}});console.log(tempScore*10);setScore(tempScore*10);}}function convertScoreToRating(){if(score>9.0){setRating(\"AAA\");setColor(\"#258750\");return;}if(score>8.0){setRating(\"AA\");setColor(\"#9cd326\");return;}if(score>7.0){setRating(\"BBB\");setColor(\"#ffcb00\");return;}if(score>6.0){setRating(\"BB\");setColor(\"#fdab3d\");return;}if(score>5.0){setRating(\"CCC\");setColor(\"#ff7575\");return;}if(score>4.0){setRating(\"CC\");setColor(\"#e2445c\");return;}setRating(\"F\");setColor(\"#bb3354\");}function getRandomFloat(min,max,decimals){var str=(Math.random()*(max-min)+min).toFixed(decimals);return parseFloat(str);}function randomScore(){var randScore=getRandomFloat(0.0,10.0,2);console.log(randScore);setScore(randScore);}useEffect(function(){fetchContextBoard();// fetchBoards()\n},[]);useEffect(function(){convertScoreToRating();},[score]);useEffect(function(){fetchMainBoard();},[mainBoardID]);useEffect(function(){calculateScore();},[mainBoardItems]);return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsx(\"h1\",{style:{fontSize:'40vh',color:\"\".concat(color)},children:rating})});};export default App;","map":{"version":3,"names":["React","useState","useEffect","mondaySdk","monday","App","score","setScore","rating","setRating","color","setColor","mainBoardID","setMainBoardID","mainBoardItems","setMainBoardItems","listen","res","console","log","data","fetchBoards","query","fetch","method","headers","body","JSON","stringify","then","json","mainBoard","boards","filter","el","name","id","fetchMainBoard","items","fetchContextBoard","boardIds","boardsIds","calculateScore","tempScore","forEach","element","col","column_values","goal","text","status","goal_track","weight","ratio","convertScoreToRating","getRandomFloat","min","max","decimals","str","Math","random","toFixed","parseFloat","randomScore","randScore","fontSize"],"sources":["/Users/akhand/Developer/monday/esg/quickstart-react/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport \"./App.css\";\nimport mondaySdk from \"monday-sdk-js\";\nimport \"monday-ui-react-core/dist/main.css\"\n//Explore more Monday React Components here: https://style.monday.com/\n\nconst monday = mondaySdk();\n\n\nconst App = () => {\n\n  const [score, setScore] = useState(10)\n  const [rating, setRating] = useState(\"AAA\")\n  const [color, setColor] = useState(\"black\")\n\n  const [mainBoardID, setMainBoardID] = useState(null)\n  const [mainBoardItems, setMainBoardItems] = useState(null)\n\n  monday.listen(\"context\", res => {\n    console.log(\"Context object changed: \", res.data);\n    // do Something\n  })\n\n  monday.listen(\"settings\", res => {\n    console.log(\"Settings object changed: \", res.data);\n    // do Something\n  })\n\n  function fetchBoards() {\n    let query = 'query { boards{ name id }}';\n\n    fetch(\"https://api.monday.com/v2\", {\n      method: 'post',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': 'eyJhbGciOiJIUzI1NiJ9.eyJ0aWQiOjE3NjYwMTI4NCwidWlkIjozMzQ2MDkzNCwiaWFkIjoiMjAyMi0wOC0yMVQwMDoxMDo0Ni4wMDBaIiwicGVyIjoibWU6d3JpdGUiLCJhY3RpZCI6MTMxNTgyMzEsInJnbiI6InVzZTEifQ.LUmDgx0ng9YKgiqKtv0Em6p1mZ0mZNMFAOpOnvjwecQ'\n      },\n      body: JSON.stringify({\n        'query': query\n      })\n    })\n      .then(res => res.json())\n      .then(res => {\n        var mainBoard = res.data.boards.filter(function (el) {\n          return el.name === \"[ESG] Annual Goal Tracker & Overview\"\n        })\n        setMainBoardID(mainBoard[0].id)\n      });\n  }\n\n  function fetchMainBoard() {\n    if (mainBoardID) {\n      let query = `query {boards (ids:${mainBoardID}){items { column_values (ids:[\"numbers\", \"status\", \"text2\", \"text4\"]) {\n        id text \n      }}}} `;\n\n      fetch(\"https://api.monday.com/v2\", {\n        method: 'post',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': 'eyJhbGciOiJIUzI1NiJ9.eyJ0aWQiOjE3NjYwMTI4NCwidWlkIjozMzQ2MDkzNCwiaWFkIjoiMjAyMi0wOC0yMVQwMDoxMDo0Ni4wMDBaIiwicGVyIjoibWU6d3JpdGUiLCJhY3RpZCI6MTMxNTgyMzEsInJnbiI6InVzZTEifQ.LUmDgx0ng9YKgiqKtv0Em6p1mZ0mZNMFAOpOnvjwecQ'\n        },\n        body: JSON.stringify({\n          'query': query\n        })\n      })\n        .then(res => res.json())\n        .then(res => {\n          setMainBoardItems(res.data.boards[0].items)\n        });\n    }\n  }\n\n  function fetchContextBoard() {\n    monday.listen(\"context\", res => {\n      console.log(\"Inside the use effect Context object changed: \", res.data.boardIds[0]);\n      setMainBoardID(res.data.boardsIds[0])\n    })\n  }\n\n  function calculateScore() {\n    if (mainBoardItems) {\n      let tempScore = 1\n      mainBoardItems.forEach(element => {\n        let col = element.column_values\n        let goal = col[0].text\n        let status = col[1].text\n        let goal_track = col[2].text\n        let weight = col[3].text\n\n        if (status === \"Working on it\") {\n          let ratio = (goal_track - goal) / goal * weight\n          tempScore += ratio\n        }\n\n        if (status === \"Overused\") {\n          let ratio = (goal - goal_track) / goal * weight\n          tempScore += ratio\n        }\n\n        if (status === \"Underused\") {\n          let ratio = (goal - goal_track) / goal * weight\n          tempScore += ratio\n        }\n\n        if (status === \"Done\") {\n          let ratio = (goal_track - goal) / goal * weight\n          tempScore += ratio\n        }\n      });\n      console.log(tempScore * 10)\n      setScore(tempScore * 10)\n    }\n  }\n\n  function convertScoreToRating() {\n    if (score > 9.0) {\n      setRating(\"AAA\")\n      setColor(\"#258750\")\n      return\n    }\n    if (score > 8.0) {\n      setRating(\"AA\")\n      setColor(\"#9cd326\")\n      return\n    }\n    if (score > 7.0) {\n      setRating(\"BBB\")\n      setColor(\"#ffcb00\")\n      return\n    }\n    if (score > 6.0) {\n      setRating(\"BB\")\n      setColor(\"#fdab3d\")\n      return\n    }\n    if (score > 5.0) {\n      setRating(\"CCC\")\n      setColor(\"#ff7575\")\n      return\n    }\n    if (score > 4.0) {\n      setRating(\"CC\")\n      setColor(\"#e2445c\")\n      return\n    }\n    setRating(\"F\")\n    setColor(\"#bb3354\")\n  }\n\n  function getRandomFloat(min, max, decimals) {\n    const str = (Math.random() * (max - min) + min).toFixed(decimals);\n\n    return parseFloat(str);\n  }\n  function randomScore() {\n    let randScore = getRandomFloat(0.0, 10.0, 2);\n    console.log(randScore)\n    setScore(randScore)\n  }\n\n\n  useEffect(() => {\n    fetchContextBoard()\n    // fetchBoards()\n  }, [])\n\n  useEffect(() => {\n    convertScoreToRating()\n  }, [score])\n\n  useEffect(() => {\n    fetchMainBoard()\n  }, [mainBoardID])\n\n\n  useEffect(() => {\n    calculateScore()\n  }, [mainBoardItems])\n\n  return (\n    <div className=\"App\">\n      <h1 style={{ fontSize: '40vh', color: `${color}` }}>{rating}</h1>\n    </div>\n  )\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}